<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="images/cj-spurr-icon-w.png" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/imageCarousel.css">
    <link rel="stylesheet" href="css/testimonials.css">
    <script defer src="js/verticalNavBar.js"></script>
    <script defer src="js/autoImageCarousel.js"></script>
    <script defer src="js/imageCarosuel.js"></script>
    <script defer src="js/shrinkNavBar.js"></script>
    <title>TESTIMONIALS | C J SPURR BUILDERS LTD</title>
</head>

<body>
    <%- include('partials/navbar') %>
        <section>
            <div class="slideshow-container full-width">
                <img src="images/LBPLogo.png" alt="licensed building practitioner logo" class="lbp-logo">
                <div class="mySlides fade">
                    <img src="images/Pukapuka-Road-6.jpg" draggable="false">
                </div>

                <div class="mySlides fade">
                    <img src="images/Pukapuka-Road-2.jpg" draggable="false">
                </div>

                <div class="mySlides fade">
                    <img src="images/Pukapuka-Road-7.jpg" draggable="false">
                </div>

                <div class="dot-container" style="margin-left: 15px;">
                    <span class="dot">
                        <span class="dot-bg"></span>
                        <span class="dot-fill"></span>
                    </span>
                    <span class="dot">
                        <span class="dot-bg"></span>
                        <span class="dot-fill"></span>
                    </span>
                    <span class="dot">
                        <span class="dot-bg"></span>
                        <span class="dot-fill"></span>
                    </span>
                </div>
            </div>

            <div class="grey">
                <img src="images/cj-spurr-icon-w.png" alt="C J SPURR BUILDERS LTD Logo" class="top logo"
                    draggable="false">
                <br><br><br><br>
                <div style="display: contents;">
                    <h1>TESTIMONIALS</h1>
                    <h2 class="services-summary-1">“DON’T JUST TAKE OUR WORD FOR IT, SEE WHAT OUR CLIENTS HAVE TO SAY.”
                    </h2>
                    <br>
                    <a class="button grey-bg" href="/contact">CONTACT US</a>
                    <br><br>
                </div>
            </div>
        </section>
        <section class="about-us">
            <br><br>
            <h1 style="color: #000; text-align: center;">NEW HOME AND RENOVATIONS BUILDERS</h1>
            <div class="div-center">
                <div class="slideshow-container square-gallery">
                    <div class="mySlides fade">
                        <img src="images/Sandspit-Photo-New-1.jpg" draggable="false">
                    </div>

                    <div class="mySlides fade">
                        <img src="images/Baddeleys-Beach-4.jpg" draggable="false">
                    </div>

                    <div class="mySlides fade">
                        <img src="images/Rainbows-End-2.jpg" draggable="false">
                    </div>

                    <a class="prev">&#10094;</a>
                    <a class="next">&#10095;</a>

                    <div class="dot-container center">
                        <span class="dot">
                            <span class="dot-bg"></span>
                            <span class="dot-fill"></span>
                        </span>
                        <span class="dot">
                            <span class="dot-bg"></span>
                            <span class="dot-fill"></span>
                        </span>
                        <span class="dot">
                            <span class="dot-bg"></span>
                            <span class="dot-fill"></span>
                        </span>
                    </div>
                </div>
                <div class="content">
                    <p>We have built our reputation on our personalised service. We listen, we consult and we work with
                        you
                        as a team. We take personal responsibility for everything we build, and we do so with confidence
                        because we build with care, skill and professionalism.
                    </p>
                    <p>Please take a look and see what our clients in Matakana, Algies Bay, Omaha, Mahurangi West, and
                        more
                        have to say about the homes we have built with them.</p>
                    <br>
                    <a class="button light-bg" href="/ourServices">OUR SERVICES</a>
                </div>
            </div>
        </section>
        <section style="background-color: #e1e1e1;">
            <br><br>
            <h1 style="color: #000; text-align: center;">TESTIMONIALS</h1>
            <br>
            <div style="text-align: center; margin-bottom: 15px;">
                <button id="sortButton" class="button lighter-grey-bg">Sort: Newest First</button>
            </div>
            <br>

            <div class="testimonial-carousel">
                <div class="testimonial-container" id="testimonialList">
                    <% testimonials.forEach(t=> { %>
                        <div class="testimonial" data-date="<%= t.date %>">
                            <img class="quote" src="/images/Quote.png" alt="">
                            <div class="review-content">
                                <p class="testimonial-text" data-full-text="<%= t.message %>">
                                    <%= t.message %>
                                </p>
                                <a class="button slim light-bg" href="/testimonial/<%= t.id %>">VIEW MORE</a>
                            </div>
                            <div class="review-author">
                                <br>
                                <strong>
                                    <%= t.author %>
                                </strong>
                                <p style="font-style: italic;">
                                    <%= t.location %>
                                </p>
                            </div>
                        </div>
                        <% }) %>
                </div>
            </div>
            <br><br><br>
        </section>
        <section class="light grey">
            <div class="div-center" style="flex-direction: column;">
                <div style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
                    <h1 class="quote-header">Hands-on<br>Warkworth Builders</h1>
                    <img src="images/cj-spurr-icon-w.png" alt="C J SPURR BUILDERS LTD Logo" class="bottom logo"
                        draggable="false">
                </div>
                <p style="color: #ffff; max-width: 60%;">To discuss your plans or make an enquiry about building a new
                    home
                    or a renovation project, call Chris Spurr on <a href="tel:027-276-6639"
                        style="text-decoration: none; font-weight: 800; color: #ffff;">027 276 6639</a> or send an
                    email. C
                    J Spurr Builders in Warkworth offers building solutions throughout Rodney, North Auckland and the
                    Kaipara.</p>
                <a class="button light-grey-bg" href="/contact">CONTACT US</a>
            </div>
        </section>
        <%- include('partials/footer') %>
            <script>
                // Responsive truncation based on screen width
                function truncateText() {
                    document.querySelectorAll(".testimonial-text").forEach(p => {
                        const fullText = p.dataset.fullText;
                        let wordLimit = 50;

                        if (window.innerWidth < 480) wordLimit = 20;
                        else if (window.innerWidth < 768) wordLimit = 35;
                        else if (window.innerWidth < 1024) wordLimit = 45;

                        const words = fullText.split(" ");
                        p.textContent = words.length > wordLimit
                            ? words.slice(0, wordLimit).join(" ") + "..."
                            : fullText;
                    });
                }

                truncateText();
                window.addEventListener("resize", truncateText);

                // Sorting functionality
                const sortBtn = document.getElementById("sortButton");
                const container = document.getElementById("testimonialList");
                let isNewestFirst = true;

                sortBtn.addEventListener("click", () => {
                    // Toggle between normal and reversed order
                    container.style.flexDirection = isNewestFirst ? "column-reverse" : "column";
                    isNewestFirst = !isNewestFirst;

                    // Update button text
                    sortBtn.textContent = isNewestFirst ? "Sort: Newest First" : "Sort: Oldest First";
                });
            </script>
</body>

</html>